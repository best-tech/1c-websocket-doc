.. _sphinx-chapter:
   
.. meta::
    :description: Обработка ошибок подключения RPC
    :keywords: ssh, ошибки

.. meta::
    :http-equiv=Content-Type: text/html; charset=utf-8

=======================================
Обработка ошибок
=======================================

Таблица описания ошибок
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. index:: ПолучитьТаблицуОшибокКомпоненты
.. function:: ПолучитьТаблицуОшибокКомпоненты(Компонента)
    
    Получает список кодов ошибок компоненты и их расшифровок. Возвращяемое значение: ТаблицаЗначений
    
.. code-block:: bsl
   :linenos:

    Функция ПолучитьТаблицуОшибокКомпоненты(Компонента)
        
        ТекстСписокОшибок = Компонента.ПолучитьСписокОшибок();
            
        ТаблицаОшибок = Новый ТаблицаЗначений;
        ТаблицаОшибок.Колонки.Добавить("Код", , "Код ошибки");
        ТаблицаОшибок.Колонки.Добавить("КраткоеОписание", , "Краткоео описание");
        ТаблицаОшибок.Колонки.Добавить("ПодробноеОписание", , "Подробное описание");
        
        МассивСтрок = СтрРазделить(ТекстСписокОшибок, Символы.ПС,Ложь);

        Для Каждого стр из МассивСтрок Цикл 
            
            МассивОписания = СтрРазделить(стр, "|");
            
            НоваяСтрока = ТаблицаОшибок.Добавить();
            НоваяСтрока.Код = МассивОписания.Получить(0);
            НоваяСтрока.КраткоеОписание = МассивОписания.Получить(1);
            НоваяСтрока.ПодробноеОписание = МассивОписания.Получить(2);
            
        КонецЦикла;
            
        Возврат ТаблицаОшибок;
        
    КонецФункции


Логирование ошибок
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. index:: СообщеноОбОшибке
.. function:: СообщеноОбОшибке(КодВозврата)

    Проверяет наличие ошибки в коде возврата, можно дописать логирование и информирование.

.. code-block:: bsl
    :linenos:   

    Функция СообщеноОбОшибке(КодВозврата) 

        Если НЕ ЗначениеЗаполнено(КодВозврата) Тогда
            Возврат Ложь;
        КонецЕсли;

        ПоискОшибки = ТаблицаОшибок.Найти(Формат(КодВозврата,"ЧГ=0"), "Код");

        Если ПоискОшибки = Неопределено Тогда
            
            Сообщить("Не известная ошибка");

        Иначе 
            
            Сообщение = Новый СообщениеПользователю;
            Сообщение.Текст = ПоискОшибки.КраткоеОписание + Символы.ПС + ПоискОшибки.ПодробноеОписание;		
            Сообщение.Сообщить();
            
        КонецЕсли;

        Возврат Истина;

    КонецФункции